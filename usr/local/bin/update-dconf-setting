#!/bin/bash
touch $HOME/.hamonikr/${0##*/}.log
echo "$(date +%Y-%m-%d_%H:%M) : ${0##*/} $1 running." | tee $HOME/.hamonikr/${0##*/}.log

file1="/etc/skel/.hamonikr/default_dconf"
file2="$HOME/.hamonikr/default_dconf"        

if [ ! -f "$files" ] ; then
    echo "Could not found $files. Copying $file1 ..."    
    cp -af $file1 $file2
fi


if [ -n "$(cmp $file1 $file2)" ] ; then
    # printf 'The file "%s" is different from "%s"\n' "$file1" "$file2"        
    rm -f $file2
    cp -af $file1 $file2                  
fi

if [ X"$1" == "Xapply" ] ; then
    echo "Dump current settings..."
    dconf dump / > $HOME/.hamonikr/backup_dconf
    if [ -f "$HOME/.hamonikr/default_dconf" ] ; then        
        echo "Execute : $HOME/.hamonikr/default_dconf"
        bash "$HOME/.hamonikr/default_dconf"
    fi
fi

# 이전 설정으로 복원할 때
if [ X"$1" == "Xrestore" ] ; then
    echo "Restore previous settings..."    
    dconf load / < $HOME/.hamonikr/backup_dconf
fi

exit 0